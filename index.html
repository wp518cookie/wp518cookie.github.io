<!DOCTYPE html>



  


<html class="theme-next mist use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT" />










<meta property="og:type" content="website">
<meta property="og:title" content="麻屋">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="麻屋">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="麻屋">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/"/>





  <title>麻屋</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">麻屋</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-schedule">
          <a href="/schedule/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-calendar"></i> <br />
            
            日程表
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/07/23/20-7-20-26/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ping wu">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="麻屋">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/07/23/20-7-20-26/" itemprop="url">20-7-20-26</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-07-23T14:04:59+08:00">
                2020-07-23
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/每日总结/" itemprop="url" rel="index">
                    <span itemprop="name">每日总结</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>7.23</p>
<p>疑问：<br>1、官方解法2<br><a href="https://leetcode-cn.com/explore/featured/card/bytedance/244/linked-list-and-tree/1040/" target="_blank" rel="noopener">https://leetcode-cn.com/explore/featured/card/bytedance/244/linked-list-and-tree/1040/</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/07/13/20-7-13-19/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ping wu">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="麻屋">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/07/13/20-7-13-19/" itemprop="url">20-7-13-19</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-07-13T17:50:00+08:00">
                2020-07-13
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/每日总结/" itemprop="url" rel="index">
                    <span itemprop="name">每日总结</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>7.13<br>mysql锁<br><a href="https://www.jianshu.com/p/13f5777966dd" target="_blank" rel="noopener">https://www.jianshu.com/p/13f5777966dd</a><br>一、行级锁：<br>分三类：记录锁、间隙锁、临键锁<br>加锁的场景：<br>共享锁<br>select … lock in share mode<br>排他锁<br>select … for update<br>update、delete、insert</p>
<p>1、记录锁<br>对某行进行加锁，如insert时，记录还不存在怎么办？会创建一个隐藏的聚簇索引，然后将其记录为锁定状态。<br>2、间隙锁<br>锁定一个范围，都是开区间<br>3、临键锁(next-key lock) 记录锁+间隙锁的组合</p>
<p>二、快照读&amp;当前读</p>
<p>三、何为幻读<br>1、同一个事务，连续两次当前读，那么这两次当前读返回的是相同的记录（记录数量一致，记录本身也一致），第二次不会返回更多的记录（幻象）<br>2、如何解决幻读：间隙锁<br>因为光锁定记录无法确保不会有幻读情况的产生，根据B+树的性质，需要将匹配的记录之前最近的一条记录，匹配的记录之间，匹配的记录之后的最近一条记录，加三个间隙锁。避免了两次当前读会有幻读现象产生。<br>3、mysql RR级别下是否解决了幻读？<br>我认为解决了，在快照读的情况下，mysql通过MVCC来避免幻读。在当前读的情况下，mysql通过next-key lock来避免幻读。</p>
<p>四、加锁的场景<br>1、如果是RC隔离级别，正常状态下主键索引会加锁，如果二级索引的话，则二级索引会加锁，同时该索引对应的主键索引加锁，不满足条件的主键索引锁会被释放，即有两个锁。<br>2、如果是RR隔离级别，会针对记录加间隙锁，</p>
<p>疑问：<br>1、innodb_locks_unsafe_for_binlog作用<br>2、ICP(Index Condition Pushdown)机制了解<br>3、间隙锁到底怎么锁的，到底是不是前开后闭？</p>
<p>7.14<br>一、mvcc机制<br>数据的新增和删除是会维护一份版本号，记录了记录新增/修改时的版本号，删除的版本号，通过undolog可以找到数据之前的版本记录，RC隔离级别下，每次select都会发起一次快照读。而RR隔离级别下，只会记录第一次的快照读结果。</p>
<p>二、spring事务传播行为：<br>1、required 默认的传播行为，如果存在事务，则支持当前事务。若没有则开启一个新事务。<br>2、supports 如果存在一个事务，支持当前事务，如果没有事务，则以非事务状态执行<br>3、mandatory 强制的，有事务加入，当前没有事务，抛异常<br>4、require_new 总是开启新事务，当前有事务则挂起存在的事务<br>5、not_supported 以非事务执行，挂起存在事务<br>6、never 以非事务执行，若存在事务，抛出异常<br>7、nest 嵌套，若有事务则以嵌套事务执行，若没有类似required。</p>
<p>三、分库分表方案<br>why选择了分库？可扩展性更好，同时对单机性能要求也更低，因为多个库可以分布在多台机器上，分表则局限性较高。<br>分两类：<br>以jar包形式引入到项目中，如sharding-jdbc<br>以proxy层形式提供服务，如mycat</p>
<p>疑问：<br>1、深入理解何博士关于MVCC的内容。<br>2、死锁排查及检测实例了解，何登成的文章。<br>3、semi-consistent了解</p>
<p>7.17<br>一、seata事务模型<br>分为三个模块来处理全局事务和分支事务的关系及处理过程<br>1、Transaction Coordinator(TC): 事务协调器，维护全局事务的运行状态，负责协调事务的运行状态，驱动全局事务的提交或者回滚。<br>如示例代码中的seata-server部分。<br>2、Transaction Manager(TM): 事务管理器，控制全局事务的边界，负责开启一个事务，负责全局事务的提交或回滚的决议。<br>3、Resource Manager(RM): 控制分支事务，负责分支注册、状态汇报，接受事务协调器的指令，驱动分支事务的提交和回滚。</p>
<p>疑问：<br>1、mysql的XA事务<br>引入一个TM，负责子事务的管理。进行两阶段式的提交： prepare阶段、commit/rollback阶段</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/07/06/20-7-6-12/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ping wu">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="麻屋">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/07/06/20-7-6-12/" itemprop="url">20-7-6-12</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-07-06T18:43:12+08:00">
                2020-07-06
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/每日总结/" itemprop="url" rel="index">
                    <span itemprop="name">每日总结</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>7.10</p>
<p>mysql中的锁：<br>一、各种锁：<br>1、共享/排他锁（Shared and Exclusive Locks)<br>2、意向锁<br>3、记录锁<br>4、间隙锁<br>5、临键锁<br>6、插入意向锁<br>7、自增锁</p>
<p>二、共享/排他锁<br>1、共享锁: select <em> from t where id = ** lock in share mode;<br>2、排他锁: select </em> from t where id = ** for update;<br>排他锁当insert、update、delete时，innodb会自动加上排他锁</p>
<p>三、意向锁<br>是表级锁，主要是当需要锁表时，快速告知其中是否有某行级锁的存在。否则需要一条条数据去遍历判断。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/07/02/20年7月待读/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ping wu">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="麻屋">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/07/02/20年7月待读/" itemprop="url">20年7月待读</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-07-02T11:11:07+08:00">
                2020-07-02
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>mysql锁分析：<br><a href="https://www.jianshu.com/p/13f5777966dd" target="_blank" rel="noopener">https://www.jianshu.com/p/13f5777966dd</a><br>死锁分析<br><a href="https://developer.aliyun.com/article/269774" target="_blank" rel="noopener">https://developer.aliyun.com/article/269774</a><br><a href="https://juejin.im/post/5dac651451882529d1528e12" target="_blank" rel="noopener">https://juejin.im/post/5dac651451882529d1528e12</a><br>间隙锁<br><a href="http://guitoo.cc/wordpress/2019/05/07/mysql%E6%98%AF%E5%A6%82%E4%BD%95%E5%A4%84%E7%90%86%E9%97%B4%E9%9A%99%E9%94%81%E7%9A%84%E5%8A%A0%E9%94%81%E8%A7%84%E5%88%99/" target="_blank" rel="noopener">http://guitoo.cc/wordpress/2019/05/07/mysql%E6%98%AF%E5%A6%82%E4%BD%95%E5%A4%84%E7%90%86%E9%97%B4%E9%9A%99%E9%94%81%E7%9A%84%E5%8A%A0%E9%94%81%E8%A7%84%E5%88%99/</a></p>
<p>CQRS<br><a href="https://www.martinfowler.com/bliki/CQRS.html" target="_blank" rel="noopener">https://www.martinfowler.com/bliki/CQRS.html</a></p>
<p>重构相关<br><a href="https://github.com/phodal/migration" target="_blank" rel="noopener">https://github.com/phodal/migration</a></p>
<p>seata源码分析：<br>分布式事务实现原理：<a href="https://my.oschina.net/keking/blog/3011509" target="_blank" rel="noopener">https://my.oschina.net/keking/blog/3011509</a><br>RM模块源码： <a href="https://mp.weixin.qq.com/s/EzmZ-DAi-hxJhRkFvFhlJQ" target="_blank" rel="noopener">https://mp.weixin.qq.com/s/EzmZ-DAi-hxJhRkFvFhlJQ</a><br>Fescar全局锁的理解： <a href="http://www.iocoder.cn/Seata/ZZ/Understanding-of-Fescar-lock-design-and-isolation-levels/" target="_blank" rel="noopener">http://www.iocoder.cn/Seata/ZZ/Understanding-of-Fescar-lock-design-and-isolation-levels/</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/07/02/20-7-2-5/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ping wu">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="麻屋">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/07/02/20-7-2-5/" itemprop="url">20-7-2-5</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-07-02T11:10:48+08:00">
                2020-07-02
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/每日总结/" itemprop="url" rel="index">
                    <span itemprop="name">每日总结</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>7.2<br>Map系<br>一、hashMap<br>1、1.8之前会死锁，why?<br><a href="https://www.jianshu.com/p/1e9cf0ac07f4" target="_blank" rel="noopener">https://www.jianshu.com/p/1e9cf0ac07f4</a><br>由于扩容时是头节点插入，会导致死锁的发生。<br>如原槽位 A -&gt; B -&gt; C<br>线程1、2同时触发扩容<br>则线程1 先执行到 next = e.next,<br>线程2完成了扩容由于是头节点插入，扩容后的引用关系如 newTab2[i] = C -&gt; B -&gt; A<br>线程1继续进行扩容<br>1） newTab1[i] = A<br>2)  e = next(B) , next = e.next(A) 则 newTab1[i] = B，<br>3） 接着处理A， 则 A.next = newTab<a href="B">i</a>, newTab[i] = A， 则引用关系成了 B-&gt; A -&gt; B<br>则在get的时候，一旦获取该槽位的数据时，就会导致死循环，引起cpu 100%<br>2、1.7 1.8区别<br>1）1.7 是数组+链表  1.8 是数组+链表+红黑树<br>2）避免并发下的死锁，扩容时1.7用的头插法，1.8用的尾部插入</p>
<p>二、TreeMap<br>1、有序的map，key必须实现Comparable或者构造treeMap时，传入Comparator，否则会报错<br>2、与hashMap红黑树的区别，hashMap以hash作为顺序，treeMap是以key的顺序/comparator作为顺序</p>
<p>三、linkedHashMap<br>1、如何维持有序：entry额外维护了两个指针,before,after，来维护有序<br>2、LRU实现： 1、accessOrder设置为True 2、removeEldest实现，如设置个size 大于特定值返回true</p>
<p>mysql<br>一、事务的实现<br>1、redo log：<br>1)目的：<br>保证数据的持久化，避免脏页因为系统崩溃后，未来得及写入磁盘而丢失。<br><a href="https://zhuanlan.zhihu.com/p/65811829" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/65811829</a><br><a href="https://www.jianshu.com/p/57c510f4ec28" target="_blank" rel="noopener">https://www.jianshu.com/p/57c510f4ec28</a><br>客户端进行数据操作时，都会经过buffer pool来处理，包括数据写入时也是，但是若每次写入都需要将数据刷到磁盘上，会触发N次随机IO。就需要redo log顺序写的机制记录每次数据页上发生的变化。<br>2)记录形式：<br>把第10表空间的第90号页面的偏移量为1024处的值更新为1<br>2、undo log：<br>1）目的：用户事务回滚及支持mvcc功能<br>2）事务回滚到前一版本的逻辑记录，记录的是逻辑语句。即insert，则undo是delete， update则是相反的update。<br>3、<br>1）为何要配套使用，若仅用redo log，则若事务涉及到很多记录，不敢刷脏页，因为事务失败无法回滚。<br>2）若仅有undo log， 则若脏页因系统宕机丢失了，则脏页上的数据无法恢复。</p>
<p>二、锁<br>mysql中的两种锁:lock、latch<br><img src="/2020/07/02/20-7-2-5/image1.png" alt="锁的分类"><br>1、innodb两种标注行级锁：S Lock、X Lock<br>共享锁：允许事务读一行数据<br>排他锁：允许事务删除或更新一行数据</p>
<p>2、意向锁：<br>如果另一个任务试图在该表级别上应用共享或排它锁，则受到由第一个任务控制的表级别意向锁的阻塞。第二个任务在锁定该表前不必检查各个页或行锁，而只需检查表上的意向锁。</p>
<p>3、一致性读：利用多版本的某个时间点数据快照，达到不加锁处理select的效果<br>Repeatable read: 同一事务中读取的是该事务下第一次查询所建立的快照<br>Read Committed : 同一事务下的一致性读都会建立和读取此查询自己的最新快照</p>
<p>疑问：<br>1、hashMap put过程</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/06/22/20-6-22-28/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ping wu">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="麻屋">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/06/22/20-6-22-28/" itemprop="url">20-6-22-28</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-06-22T11:04:01+08:00">
                2020-06-22
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/每日总结/" itemprop="url" rel="index">
                    <span itemprop="name">每日总结</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>6.28<br>一、共识算法（consensus algorithm）<br>1、cap中的一致性<br>任何一个读取返回新值后，所有后续读取（在相同或其他客户端上）也必须返回新值，类似volatile语义。</p>
<p>二、raft各部分<br>1、leader选举<br>2、日志复制<br>3、</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/06/15/20-6-15-21/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ping wu">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="麻屋">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/06/15/20-6-15-21/" itemprop="url">20-6-15-21</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-06-15T14:55:03+08:00">
                2020-06-15
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/每日总结/" itemprop="url" rel="index">
                    <span itemprop="name">每日总结</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>6.15<br>一、GC之引用<br>1、referenceQueue<br>1.1、为了监控SoftReference/WeakReference/PhantomReference是否已被GC<br>1.2、为了替代finalize,之前释放的时机是交给了jvm来实现，可能会有并发释放啊等情况，不可控且不安全，当finalize时再次关联到强引用则无法被回收。而referenceQueue可以在gc之后，将该reference加入到queue中，可以通过remove在获取，再执行自定义的逻辑。<br>1.3、在GC发生之前放入queue中<br>2、虚引用 phantomReference使用场景：<br>比如记载一个很大的图片，当确认了图片已被GC后才允许继续加载图片，避免OOM。</p>
<p>二、GC收集器<br>1、cms(Concurrent Mark Sweep)收集器<br>1.1、收集过程<br>1）初始标记<br>stop the world,标记GC ROOT直接关联到的对象<br>2）并发标记<br>根据GC ROOT直接关联到的对象来进行并发递归进行标记<br>3）重新标记<br>stop the world,修正并发期间因用户程序继续运行导致标记产生变动的部分<br>4）并发清除<br>1.2、优点：低停顿<br>1.3、缺点：跟用户抢占cpu、无法收集浮动垃圾、会有很多内存碎片</p>
<p>2、G1收集器<br>2.1、收集过程<br>1）初始标记<br>2）并发标记<br>3）最终标记<br>4）筛选回收</p>
<p>3、对象分配过程<br>3.1、先在Eden区中分配，当Eden区没有足够的空间进行分配时，jvm将发起一次GC<br>3.2、大对象直接进入老年代<br>3.3、年龄达到一定值则晋升至老年代<br>疑问：<br>1、深入理解cms、G1<br>2、虚拟机调优</p>
<p>6.16<br>一、字节码：平台无关的中间码，为了支持java的跨平台支持，通过各种不同平台的jvm来将字节码翻译成平台相关的机器码。<br>二、类加载过程：<br>1、加载：将二进制流转成内存中class的数据结构<br>2、验证：字节码的规范检查、符号引用检查<br>3、准备：为static分配内存并设置变量类型的初始值<br>4、解析：符号引用转成直接引用（即静态绑定的过程）<br>5、初始化：clinit，给静态变量赋值<br>三、类加载器<br>双亲委派机制：向上查找，向下委托<br>递归操作：1、判断当前classLoader是否加载过 -&gt;没加载过，是否有parent加载器，有则递归上述行为，没有则交给boot加载器递归上述行为 -&gt; 尝试加载该类</p>
<p>四、各代垃圾收集器整理<br>1、垃圾收集器一览<br>1.1、年轻代： Serial、PraNew、Parallel Scavenge、G1收集器<br>1.2、老年代： Serial Old、Parallel Old、CMS、G1收集器<br>2、安全点：说白了就是一段引用关系不会发生变化的点</p>
<p>疑问：<br>1、锁升级过程</p>
<p>6.18<br>一、redisson的watchdog机制<br>为了避免持有锁的节点执行时间超过锁的过期时间，redisson提供了看门狗机制，在默认过期时间/3的频率会刷新过期时间，默认是30s。当节点挂了无法继续更新节点过期时间则自然会失效。<br>二、redis如何实现可重入的？<br>通过hash结构，key-value-count<br>通过count计数来控制锁的可重入<br>三、获取不到锁如何处理<br>通过一个本地的信号量，初始许可为0，acquire ttl时间，当锁释放了，则+1许可数量。避免出现同时唤醒多个线程竞争锁（羊群效应）。<br>四、公平锁如何实现<br>通过redis中内置的队列来达到这个效果</p>
<p>6.19<br>一、redLock<br>1、是为了避免发生单redis节点在failover时会发生解决不了的安全问题，redLock由N个完全独立的redis节点（通常5个）。<br>2、加锁步骤<br>2.1、获取当前时间<br>2.2、按顺序依次获取锁，获取锁的时候设置一个小的timeout时间，获取失败时继续获取别的节点<br>2.3、计算整个获取过程耗时，若&lt;锁的有效时间且获取数量 &gt;= N/2+1,则认为成功获取到了锁。<br>2.4、刷新锁的有效时间<br>3、存在的问题：<br>3.1、节点宕机导致的问题<br>1）客户端1锁住了A、B、C节点，D、E未获取成功<br>2）节点C崩溃，并未将C持久化下来，丢失了<br>3）节点B锁住了C、D、E，获取锁成功<br>故而需要设置延迟重启，重启间隔大于锁的有效时间。<br>3.2、客户端本身hang住导致的问题<br>1）客户端因为GC/网络原因，拿到第一个锁后hang住，直至锁过期了，才后续进行获取，计算出来的size满足锁的条件，导致可能同时两个客户端获取到锁。<br>即客户端1获取到 A、B、C，由于A获取到后停顿了一段时间导致A实际过期了，客户端获取到了A、D、E<br>加个单调递增的序号，数据库层面控制，当发现更低序号的请求时拒绝<br>3.3、对时钟一致性依赖程度较高<br>客户端1锁住节点A、B、C，时钟往前跳跃导致的节点C的锁快速过期，客户端2获取到了C、D、E</p>
<p>二、zk distributed lock<br>1、所有锁都放在一个节点下还是以锁为目录，在里头再具体排序，锁目录是怎么维护的？<br>可以新建一个以锁名命名的永久节点，里头加个前缀<br>2、获取逻辑：<br>2.1、先初始化锁目录，若没有新建永久节点<br>2.2、创建临时有序节点，判断该节点是否是children下第一个节点，是则获取锁<br>2.3、不是第一个节点则监听上一个节点，若监听到上一个节点被删除了说明锁获取成功，避免羊群效应<br>3、存在问题：<br>zk假心跳，网络不通等原因session过期，而实际仍在执行。另一个客户端也获取到了锁，则可能造成同时有两个锁</p>
<p>疑问：<br>1、zookeeper的watch机制，时间节点控制<br>提前watch好再判断exist即可</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/06/09/20-6-9-14/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ping wu">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="麻屋">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/06/09/20-6-9-14/" itemprop="url">20-6-9-14</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-06-09T10:11:23+08:00">
                2020-06-09
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/每日总结/" itemprop="url" rel="index">
                    <span itemprop="name">每日总结</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>6.9<br>一、JVM各区域内存划分<br>线程私有：<br>1、程序计数器(Program Counter):<br>  记录了线程当前正在执行的字节码，JNI的话则为undefined。<br>  唯一一个无OutOfMemoryError情况的区域<br>2、虚拟机栈：方法执行的内存模型，由一个个栈帧组成，方法调用就是入栈，完成调用即出栈。<br>StackOverflowError: 栈内存不够了, -Xss可以设置栈的内存大小。<br>OutOfMemoryError: 内存分配会占用机器内存，当机器内存耗尽则会报内存溢出。<br>栈帧的组成：<br>2.1、局部变量表：this指针 -&gt; 方法参数 -&gt; 局部变量<br>2.2、操作数栈：虚拟机指令集设计一般分两类：基于寄存器的指令设计、基于栈的设计。JAVA是基于栈的，Android是基于寄存器的。基于栈的话更容易支持不同的平台，不会对cpu的寄存器做任何要求。<br>2.3、方法出口：<br>1）正常返回<br>2）异常返回<br>2.4、指向运行时常量池的常量引用：<br>2.4.1、字符引用与直接引用<br>字符引用：这个字符串包含足够的信息，如：“java/io/PrintStream.println:(Ljava/lang/String;)V”，可以在实际使用时，根据该字符串找到对应的方法。第一次使用时会替换为直接引用，不用再次搜索。<br>直接引用：就是偏移量，直接在类的内存中根据偏移量找到对应的方法字节码起始位置。<br>ref:<a href="https://www.zhihu.com/question/30300585" target="_blank" rel="noopener">https://www.zhihu.com/question/30300585</a><br>2.4.2、虚方法表: 每个类有个方法表，每个子类都有其父类方法表中国呢的所有方法。子类方法在方法表中的索引值，和它重写的父类方法索引值相同。当类加载时，动态绑定会将符号引用转成直接引用（类似方法表的索引值），静态绑定会直接指向具体的目标方法。实际调用时，获取调用方的实际类型及其对应的方法表，根据索引值找到实际的执行方法。<br>3、本地方法栈：执行Native方法用的<br>线程共享：<br>1、方法区/元数据：<br>JDK1.7叫方法区也叫永久代：用来存放虚拟机加载的类信息、常量、静态变量、编译后的代码。<br>JDK1.8中叫元数据区：MetaspaceSize 使用的是本地内存，不再与堆有关。同时字符串常量池移到堆上。<br>2、堆<br>从内存回收角度：新生代、老年代，为了更好的回收内存。<br>从内存分配角度（Thread Local Allocation Buffer 即线程本地分配缓存）：<br>线程私有的分配缓冲区，并不是说这块内容是线程私有的，只是说线程分配角度来看是私有的，为了更快的分配内存，避免线程分配对象时针对同一块内存的竞争，                          只有TLAB用完后，需要分配新的TLAB时，才需要同步锁定。</p>
<p>二、对象内存布局：对象头、实例数据、对齐填充<br>1、对象头：<br>1.1、运行时数据（64位）：hashcode,gc分代年龄<br>1.2、类型指针（64位，未开启压缩指针）：指向类元数据的指针，通过这个指针来确认这个类时哪个类的实例。<br>1.3、数组长度（32位）：（若是数组的话）<br>2、压缩指针机制：<br>2.1、对象填充：对象的起始地址必须对齐至8的倍数，方便寻址。<br>2.2、字段对齐：为了让字段只出现在同一CPU的缓存行中，若不对齐则可能出现跨缓存行的字段。<br>2.3、压缩指针就是8字节为单位保存指针，即每个对象起始地址肯定是8的倍数，故而可以用每位实际地址/8来压缩其指针表示，堆的大小在4G ～ 32G之间可以用。</p>
<p>疑问：<br>1、TLAB<br><a href="https://www.cnblogs.com/hollischuang/p/12453988.html" target="_blank" rel="noopener">https://www.cnblogs.com/hollischuang/p/12453988.html</a></p>
<p>6.11<br>一、堆OOM<br>1、先确认是内存溢出还是内存泄漏<br>内存溢出：没有足够的内存分配<br>内存泄漏：申请内存后，没有释放已申请的内存。内存泄漏如果是频繁发生的话，最终会导致内存溢出。</p>
<p>二、GC相关<br>1、可达性分析：通过GC ROOT进行可达性分析，栈中引用对象，静态变量，常量引用对象<br>2、引用的分类：强引用、软引用、弱引用、虚引用<br>2.1、弱引用(weakReference)使用场景：当某些场景下，thread如线程池是复用的，由于threadLocalMap是线程特有的，一直在，则说明一直有强引用在，会导致即使栈上的threadLocal已经被销毁了，但是entry仍由于线程的关系无法被回收。<br>但是弱引用后，仅仅threadLocal被回收了，value并不会被回收，等于Entry中只是key没了，value还在。所以每次get或者set时遇到null的key，都会清理下value。<br>清理的时候还会进行重哈希，为何？因为使用的是开放地址法处理哈希冲突，所以每次查找到null的entry就停了，但是你清除entry的话，会导致后续的的entry查找中断，所以需要重新hash定位。<br>2.2、软引用(softReference)使用场景：适合第一次GC后仍旧没有足够的内存后才会收集掉。</p>
<p>三、hash冲突处理<br>1、拉链法：发生冲突时，类似hashmap的处理，适合节点比较多，可以通过较大负载因子带来的收益来抵消额外指针带来的空间浪费<br>2、开放地址法：类似threadlocal处理冲突的方式，比较怕冲突，因为一旦冲突厉害，元素较多，很有很多无意义的遍历。适合元素较小，负载因子设置较小的情况。<br>3、再哈希法：每级冲突都设置一个hash函数，但是增加cpu时间。</p>
<p>疑问：<br>1、一致性hash的深入了解<br><a href="https://www.cnblogs.com/xrq730/p/5186728.html" target="_blank" rel="noopener">https://www.cnblogs.com/xrq730/p/5186728.html</a><br>2、内存泄漏理解，如何人工模拟内存泄漏<br><a href="https://club.perfma.com/article/266960" target="_blank" rel="noopener">https://club.perfma.com/article/266960</a><br>内存泄露：应用占用cpu高，运行一段时间，频繁fullGC，但不马上抛内存溢出；<br>死锁：应用占用cpu高，gc无明显异常，jstack 命令可以发现deadlock<br>OOM: 这个看日志就能看出来，线程过多unable to create Thread，堆溢出：java heap space<br>某线程占用cpu高： 通过top命令查找java线程占用cpu最高的， jstack命令分析线程栈信息<br>3、线上响应慢原因排查<br>4、sql 两边执行计划不一致原因查询<br>5、treemap ceiling floor实现</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/06/03/20年6月待读/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ping wu">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="麻屋">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/06/03/20年6月待读/" itemprop="url">20年6月待读</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-06-03T10:33:50+08:00">
                2020-06-03
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>一、JIT编译器相关<br><a href="https://blog.csdn.net/qq_28674045/article/details/51896129" target="_blank" rel="noopener">https://blog.csdn.net/qq_28674045/article/details/51896129</a><br>二、GC相关<br>1、Minor GC和Full GC的区别是什么？触发条件呢？：<br><a href="https://www.zhihu.com/question/41922036/answer/93079526" target="_blank" rel="noopener">https://www.zhihu.com/question/41922036/answer/93079526</a>   </p>
<p>2、关于CMS、G1垃圾回收器的重新标记、最终标记疑惑?：<br><a href="https://www.zhihu.com/question/37028283/answer/78008095" target="_blank" rel="noopener">https://www.zhihu.com/question/37028283/answer/78008095</a><br>3、主流的垃圾回收机制都有哪些?：<br><a href="https://www.zhihu.com/question/32373436/answer/56461502" target="_blank" rel="noopener">https://www.zhihu.com/question/32373436/answer/56461502</a><br>4、java的gc为什么要分代：<br><a href="https://www.zhihu.com/question/53613423/answer/135743258" target="_blank" rel="noopener">https://www.zhihu.com/question/53613423/answer/135743258</a><br>4.1、GC Root<br>比如栈上的引用，minorGC时，old gen代指向young gen的部分等。</p>
<p>6.9<br>1、JVM相关<br><a href="https://www.artima.com/insidejvm/ed2/introarch.html" target="_blank" rel="noopener">https://www.artima.com/insidejvm/ed2/introarch.html</a><br>jvm内存空间划分<br><a href="https://blog.jamesdbloom.com/JVMInternals.html" target="_blank" rel="noopener">https://blog.jamesdbloom.com/JVMInternals.html</a><br>jvm相关问题<br><a href="https://juejin.im/post/5d297a2e6fb9a07ee1695628" target="_blank" rel="noopener">https://juejin.im/post/5d297a2e6fb9a07ee1695628</a><br>2、锁升级相关<br><a href="https://juejin.im/post/5a5c09d051882573282164ae" target="_blank" rel="noopener">https://juejin.im/post/5a5c09d051882573282164ae</a><br>3、JVM规范<br><a href="https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-2.html#jvms-2.5.1" target="_blank" rel="noopener">https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-2.html#jvms-2.5.1</a></p>
<p>6.10<br>1、为什么移除永久代<br><a href="http://openjdk.java.net/jeps/122" target="_blank" rel="noopener">http://openjdk.java.net/jeps/122</a></p>
<p>6.11<br>1、redis集群相关<br>分布式文件系统元数据服务器模型<br><a href="http://yihongwei.com/2011/10/dist-filesystem-metadata-server/" target="_blank" rel="noopener">http://yihongwei.com/2011/10/dist-filesystem-metadata-server/</a><br>2、P2P 网络核心技术：Gossip 协议<br><a href="https://zhuanlan.zhihu.com/p/41228196" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/41228196</a><br>3、节点的存活检测，故障转移？<br><a href="https://cloud.tencent.com/developer/article/1444057" target="_blank" rel="noopener">https://cloud.tencent.com/developer/article/1444057</a><br>4、jedis、lettuce<br><a href="https://www.cnblogs.com/taiyonghai/p/9454764.html" target="_blank" rel="noopener">https://www.cnblogs.com/taiyonghai/p/9454764.html</a></p>
<p>6.17<br>1、分布式系统构建<br><a href="https://martin.kleppmann.com/2016/02/08/how-to-do-distributed-locking.html" target="_blank" rel="noopener">https://martin.kleppmann.com/2016/02/08/how-to-do-distributed-locking.html</a><br>2、如果构建分布式锁<br><a href="https://redis.io/topics/distlock" target="_blank" rel="noopener">https://redis.io/topics/distlock</a></p>
<p>6.18<br>1、分布式数据库<br><a href="http://dblab.xmu.edu.cn/post/google-bigtable/" target="_blank" rel="noopener">http://dblab.xmu.edu.cn/post/google-bigtable/</a></p>
<p>6.22<br>1、分布式相关理论<br><a href="http://baotiao.github.io/2017/11/16/choice-in-consensus/" target="_blank" rel="noopener">http://baotiao.github.io/2017/11/16/choice-in-consensus/</a><br><a href="https://www.cs.cornell.edu/fbs/publications/viveLaDifference.pdf" target="_blank" rel="noopener">https://www.cs.cornell.edu/fbs/publications/viveLaDifference.pdf</a></p>
<p>6.23<br>1、raft官网<br><a href="https://raft.github.io/" target="_blank" rel="noopener">https://raft.github.io/</a><br>2、线性一致性<br><a href="https://zhuanlan.zhihu.com/p/42239873" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/42239873</a><br>3、一致性算法示意图<br><a href="http://thesecretlivesofdata.com/raft/" target="_blank" rel="noopener">http://thesecretlivesofdata.com/raft/</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/06/01/20-6-1-7/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ping wu">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="麻屋">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/06/01/20-6-1-7/" itemprop="url">20-6-1-7</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-06-01T09:53:57+08:00">
                2020-06-01
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/每日总结/" itemprop="url" rel="index">
                    <span itemprop="name">每日总结</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <p>6.1<br>网络层<br>一、MTU<br>1、不同数据链路中，MTU的大小也各不相同。当遇到需要传输数据大于MTU限制，会被分片传输。分片传输会加大路由器的负担，而且一旦某一分片异常没有到达，会导致整个IP数据报报废。<br>2、路径MTU<br>2.1、定义：<br>发送端主机到接收端主机之间不需要分片的最大MTU大小，即整个路由链路上中的最小MTU。然后主机根据MTU来提前分片后发送。避免在路由器上的分片处理，且可以在TCP中发送更大的包。<br>2.2、原理：<br>UDP中IP数据报设置禁止分片标志符，一旦路由器遇到需要分片才能处理的大包，不进行分片，而是将包丢弃，并返回ICMP不可大达消息将MTU值发回主机。主机根据MTU分好片后再循环之前的操作，直到没有收到任何ICMP。<br>TCP的情况下则是根据MTU计算出MSS长度，直接在TCP层就拆好包，避免了IP的分片。    </p>
<p>二、IP层的协议<br>1、ARP：Address Resolution Protocol<br>通过广播根据IP获取MAC的协议<br>2、ICMP：Internet Control Message ProtocolAddress Resolution Protocol<br>检测网络是否通，例如PING命令，并告知错误原因等。     </p>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2020/06/01/20-6-1-7/#more" rel="contents">
              阅读全文 &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">ping wu</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">17</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                
                  <span class="site-state-item-count">1</span>
                  <span class="site-state-item-name">分类</span>
                
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                
                  <span class="site-state-item-count">3</span>
                  <span class="site-state-item-name">标签</span>
                
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">ping wu</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Mist</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
